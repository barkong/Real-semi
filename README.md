# *Real-semi*


![header](https://capsule-render.vercel.app/api?type=waving&color=auto&height=300&section=header&text=Real-semi/MovieInfoSite)
[![Hits](https://hits.seeyoufarm.com/api/count/incr/badge.svg?url=https%3A%2F%2Fgithub.com%2Fbarkong%2FReal-semi%2Fhit-counter&count_bg=%2374806B&title_bg=%231C3E88&icon=&icon_color=%23E7E7E7&title=hits&edge_flat=false)](https://hits.seeyoufarm.com)

## ğŸ’ªSkills

##### ğŸ’¾Database ![MicrosoftSQLServer](https://img.shields.io/badge/Microsoft%20SQL%20Sever-CC2927?style=for-the-badge&logo=microsoft%20sql%20server&logoColor=white)
##### ğŸ“šLibraries ![jQuery](https://img.shields.io/badge/jquery-%230769AD.svg?style=for-the-badge&logo=jquery&logoColor=white)
##### â˜ï¸Hosting/SaaS ![Oracle](https://img.shields.io/badge/Oracle-F80000?style=for-the-badge&logo=oracle&logoColor=white)
##### ğŸ’»IDEs/Editors ![Eclipse IDE](https://img.shields.io/badge/Eclipse%20IDE-2C2255.svg?&style=for-the-badge&logo=Eclipse%20IDE&logoColor=white) ![Visual Studio Code](https://img.shields.io/badge/Visual%20Studio%20Code-007ACC.svg?&style=for-the-badge&logo=Visual%20Studio%20Code&logoColor=white) <img src="https://img.shields.io/badge/Sourcetree-0052CC?style=for-the-badge&logo=Sourcetree&logoColor=white">
##### ğŸ“‹ Languages ![HTML5](https://img.shields.io/badge/html5-%23E34F26.svg?style=for-the-badge&logo=html5&logoColor=white) ![Css](https://img.shields.io/badge/css-1572B6?style=for-the-badge&logo=css3&logoColor=white) ![Java](https://img.shields.io/badge/java-%23ED8B00.svg?style=for-the-badge&logo=java&logoColor=white) ![JavaScript](https://img.shields.io/badge/javascript-%23323330.svg?style=for-the-badge&logo=javascript&logoColor=%23F7DF1E) 
##### ğŸ—„ï¸ Servers ![Apache Tomcat](https://img.shields.io/badge/apache%20tomcat-%23F8DC75.svg?style=for-the-badge&logo=apache-tomcat&logoColor=black)


* * *



*ğŸ¬ ì˜í™” ì •ë³´ ì‚¬ì´íŠ¸ ğŸ¬*
-------------
### ì˜í™”ì— ê´€ë ¨ëœ ì •ë³´ë¥¼ ë³´ì—¬ì£¼ëŠ” ì‚¬ì´íŠ¸ì…ë‹ˆë‹¤. 
- ë‚ ì§œ ë³„ ì„ íƒì„ í†µí•´ ë°•ìŠ¤ì˜¤í”¼ìŠ¤ ìˆœìœ„ë³„ ì •ë³´
- ê²€ìƒ‰ì°½ì„ í†µí•´ ì–»ê³ ì‹¶ì€ ì˜í™” ì •ë³´ 
- ì˜í™”ì— ê´€ë ¨ëœ ë‰´ìŠ¤ ì •ë³´
- ë¡œê·¸ì¸ì„ í†µí•œ ë¦¬ë·°ê²Œì‹œíŒ, ììœ ê²Œì‹œíŒ ì†Œí†µ
- ì¹´ì¹´ì˜¤ë§µì„ í†µí•œ ì£¼ë³€ ì˜í™”ê´€ ìœ„ì¹˜ ì •ë³´
- ~~ì¥ë¥´ë³„ ì˜í™”ì •ë³´~~ <br>

## ê¸°ëŠ¥ë³„ ì†Œê°œ
* íšŒì›(íšŒì›ê°€ì…â€¢íƒˆí‡´, ë¡œê·¸ì¸, íšŒì›ì •ë³´ ì¡°íšŒâ€¢ìˆ˜ì •)
* ê²Œì‹œíŒ (ì˜í™” ë¦¬ë·°, ììœ , ë‚´ê°€ì“´ê¸€)
* ì˜í™” api (ë°•ìŠ¤ì˜¤í”¼ìŠ¤, ê²€ìƒ‰, ë‰´ìŠ¤)
* ì¹´ì¹´ì˜¤ë§µ api 

## 1. íšŒì›

### 1.1 íšŒì›ê°€ì…
*ìœ íš¨ì„±ê²€ì‚¬*
- í•­ëª©ë§ˆë‹¤ ë‹¤ë¥¸ ì¡°ê±´ì„ ê±¸ì–´ ë‹¤ì–‘í•œ functionì„ í™œìš©
- ì¢‹ì•„í•˜ëŠ” ì¥ë¥´ ì¹´í…Œê³ ë¦¬ ì²´í¬ë°•ìŠ¤ ê¸°ëŠ¥

### 1.2 ë¡œê·¸ì¸
- ë¡œê·¸ì¸ ì„¸ì…˜ì˜ ìœ ë¬´ì— ë”°ë¼ ë‹¤ë¥¸ í˜ì´ì§€

### 1.3 ë¡œê·¸ì¸ì— ë”°ë¥¸ í˜ì´ì§€ ì»¨íŠ¸ë¡¤
ë¡œê·¸ì¸ì‹œ ë³´ê³ ìˆë˜í˜ì´ì§€ë¡œ ê°€ë„ë¡ êµ¬í˜„
```java
// ë³´ê³  ìˆëŠ” í˜ì´ì§€ ì»¨íŠ¸ë¡¤ëŸ¬ ì½”ë“œ
@WebServlet("/HC")
public class HC extends HttpServlet {
	protected void doGet(HttpServletRequest request, HttpServletResponse response)
			throws ServletException, IOException {
		
		String watchingPage = request.getRequestURL().toString();
		String param = request.getQueryString();
		if (request.getQueryString() != null) {
			watchingPage = watchingPage + "?" + param;
		}
		request.getSession().setAttribute("watchingPage", watchingPage);

		Model.loginCheck(request);
		request.setAttribute("contentPage", "home.jsp");
		request.getRequestDispatcher("index.jsp").forward(request, response);
		}
	}
		
// ë¡œê·¸ì¸ ì»¨íŠ¸ë¡¤ëŸ¬ ì½”ë“œ
@WebServlet("/LoginC")
public class LoginC extends HttpServlet {
	protected void doPost(HttpServletRequest request, HttpServletResponse response)
			throws ServletException, IOException {
		Model.login(request);
		
		if (Model.loginCheck(request)) {
			String watchingPage1 = request.getRequestURL().toString();
			HttpSession hs = request.getSession();
			String watchingPage = (String) hs.getAttribute("watchingPage");
			System.out.println("LoginC watchingPage = " + watchingPage);

			if (watchingPage == null || watchingPage.equals(watchingPage1)) {
				request.setAttribute("contentPage", "home.jsp");
				request.getRequestDispatcher("index.jsp").forward(request, response);
			} else {
				response.sendRedirect(watchingPage);
			}
			
		} else {
			request.setAttribute("contentPage", "jsp/jw/loginPage.jsp");
			request.getRequestDispatcher("index.jsp").forward(request, response);
		}
	}
}	
```

### 1.4 ë§ˆì´í˜ì´ì§€
- íŒ¨ìŠ¤ì›Œë“œ,ì´ë¦„,ì´ë©”ì¼,ì „í™”ë²ˆí˜¸,ì¢‹ì•„í•˜ëŠ” ì¥ë¥´ ìˆ˜ì •ê°€ëŠ¥
- ë‚´ê°€ì“´ê¸€ëª©ë¡ : ë§ˆì´í˜ì´ì§€ì—ì„œ ë‘ê°€ì§€ ê²Œì‹œíŒ ë¶ˆëŸ¬ì™€ ì¡°íšŒ

## 2. ê²Œì‹œíŒ (ë¦¬ë·°, ììœ )
- ê¸€ì“°ê¸°, ìˆ˜ì •, ì‚­ì œ, í˜ì´ì§•, ì¡°íšŒ, ê²€ìƒ‰ê¸°ëŠ¥ êµ¬í˜„
- ë‘ ê²Œì‹œíŒì— ê²Œì‹œíŒë³„ ìµœì‹ /ìµœë‹¤ì¡°íšŒê¸€ ë°°ì¹˜
- ê²Œì‹œíŒ ëª©ë¡ ìƒë‹¨ì— ìµœë‹¤ì¡°íšŒê¸€ 3ê°œ ìƒì‹œë°°ì¹˜
- DBì €ì¥ì‹œ ëª¨ë¸ì—ì„œ <br>ê°’ìœ¼ë¡œ replaceí•´ì„œ ì €ì¥
- DBì—ì„œ ê°€ì ¸ì˜¬ë• ëª¨ë¸ì—ì„œ ì²˜ë¦¬í•˜ëŠ” ê²ƒë³´ë‹¤ JSTLì—ì„œ ì²˜ë¦¬í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤

```jsp
	<!-- JSPìƒë‹¨ --> 
	<%@ taglib prefix="fn" uri="http://java.sun.com/jsp/jstl/functions"%>
	<% pageContext.setAttribute("br", "<br>"); %>
	<% pageContext.setAttribute("cn", "\n"); %>
	
	<!-- JSPë³¸ë¬¸ -->
	${fn:replace(paramVO.content, br, "cn")}
```


### 2.1 ì˜í™” ë¦¬ë·° ê²Œì‹œíŒ (ë¡œê·¸ì¸ í•´ì•¼ ì‚¬ìš© ê°€ëŠ¥)
- íšŒì›ê°€ì… í•´ì•¼ ì‚¬ìš© ê°€ëŠ¥í•˜ë‹¤.
- ì˜í™”ì— ê´€ë ¨ëœ ë¦¬ë·° ì‘ì„± ë° ìˆ˜ì • ì‚­ì œ ê°€ëŠ¥


### 2.2 ììœ  ê²Œì‹œíŒ
- ëª¨ë‘ ë‹¤ ì‚¬ìš© ê°€ëŠ¥(ê¸€ ì“°ê¸°, ìˆ˜ì •, ì‚­ì œ)


### 2.3 ì¡°íšŒìˆ˜ ê¸°ëŠ¥
- ipê°’ì„ í™œìš©í•˜ì—¬ ë³¸ì¸ê¸€ í´ë¦­í•˜ë©´ ì¡°íšŒìˆ˜ ì•ˆì˜¬ë¼ ê°€ë„ë¡ ì„¤ê³„

```java
public static boolean ipCheck(HttpServletRequest request) {

	Connection con = null;
	PreparedStatement pstmt = null;
	ResultSet rs = null;
	String sql = "select f_ip from semi_review where f_no=?";
	String regIp = null; // ê¸€ì— ë“±ë¡ë˜ì–´ ìˆëŠ”  ip
	String urIp = request.getRemoteAddr(); //í˜„ì¬ ì‚¬ìš©ì ip
	System.out.println("urIp : " + urIp);

	try {
		String no = request.getParameter("no");
		System.out.println("param no : " + no);

		con = DBManager.connect();
		pstmt = con.prepareStatement(sql);

		pstmt.setString(1, no);

		rs = pstmt.executeQuery();
		if (rs.next()) {
			regIp = rs.getString("f_ip");
		}

	} catch (Exception e) {
		e.printStackTrace();
		request.setAttribute("r", "ì„œë²„ ì˜¤ë¥˜..");
	} finally {
		DBManager.close(con, pstmt, rs);
	}
	System.out.println("regIp : " + regIp);

	if (urIp.equals(regIp)) {
		return false;
	} else {
		return true;
	}
}


### 2.4 ë‹¤ì–‘í•œ ê²½ìš°ì˜ ìˆ˜ì— ëŒ€ë¹„
- ì„¸ì…˜ì´ ë§Œë£Œëœ ê²½ìš°
- ê²€ìƒ‰í›„ ì¬ê²€ìƒ‰ ë° í˜ì´ì§•
```

## 3. ì˜í™” API
- ë„¤ì´ë²„ ê²€ìƒ‰ apiì™€ ì˜í™”ì§„í¥ìœ„ì›íšŒ api ë“±ë¡í›„ ì‚¬ìš©

### 3-1. í‚¤ ë°œê¸‰
 <img src="https://user-images.githubusercontent.com/96048975/205032655-196075dc-e665-4533-90e1-c24dd7ad2b3c.PNG" width="50%" height="30%">
 <img src="https://user-images.githubusercontent.com/96048975/205032662-ede4bfd7-df4b-42f2-bf39-59fdec471fc5.PNG" width="50%" height="30%">
 <img src="https://user-images.githubusercontent.com/96048975/205032668-dd734fe2-3889-4db4-a314-e807ce73bd7e.PNG" width="50%" height="30%">

### 3-2. API ì‚¬ìš©
Jquery, Javaë¥¼ ì‚¬ìš©í•´ ê°’ì„ ë°›ì•„ì™”ë‹¤


ì¼ë¶€ ì˜ˆì‹œ
```jsp
<%
String str = request.getParameter("title");
System.out.println(str);

str = URLEncoder.encode(str, "utf-8");
System.out.println(str);

String url = "https://openapi.naver.com/v1/search/movie.json";
url += "?query=" + str;
url += "&display=1";

System.out.println(url);

URL u = new URL(url);
HttpURLConnection huc = (HttpsURLConnection) u.openConnection();

huc.addRequestProperty("X-Naver-Client-Id", "_dGZX3vm4d9iUQCSPrmu");
huc.addRequestProperty("X-Naver-Client-Secret", "CPXPizei_I");

InputStream is = huc.getInputStream();
InputStreamReader isr = new InputStreamReader(is, "utf-8");
System.out.println(is);

JSONParser jp = new JSONParser();

JSONObject naverData = (JSONObject) jp.parse(isr);
System.out.println(naverData.get("items"));

JSONArray items = (JSONArray) naverData.get("items");
JSONObject item = (JSONObject) items.get(0);
String img = (String) item.get("image");
String director = (String) item.get("director");
director = director.replace("|", "");
String actor = (String) item.get("actor");
actor = actor.replace("|", ",");
String link = (String) item.get("link") + "";
String pubDate = (String) item.get("pubDate");
String subtitle = (String) item.get("subtitle");

JSONObject joo = new JSONObject();
joo.put("img", img);
joo.put("link", link);
joo.put("director", director);
joo.put("actor", actor);
joo.put("pubDate", pubDate);
joo.put("subtitle", subtitle);

response.setContentType("application/json");
response.setCharacterEncoding("utf-8");
out.print(joo.toJSONString());
```
``` js
   $.ajax({
                url: "jsp/dw/getMovie.jsp", // í´ë¼ì´ì–¸íŠ¸ê°€ HTTP ìš”ì²­ì„ ë³´ë‚¼ ì„œë²„ì˜ URL ì£¼ì†Œ
                async: false,
                data: { title: movieList[i].movieNm }, // HTTP ìš”ì²­ê³¼ í•¨ê»˜ ì„œë²„ë¡œ ë³´ë‚¼ ë°ì´í„°
                method: "GET", // HTTP ìš”ì²­ ë©”ì†Œë“œ(GET, POST ë“±)
                dataType: "json", // ì„œë²„ì—ì„œ ë³´ë‚´ì¤„ ë°ì´í„°ì˜ íƒ€ì…
              })
```

### 3-3. ë°•ìŠ¤ì˜¤í”¼ìŠ¤
ìº˜ë¦°ë” êµ¬í˜„í•´ì„œ ë‚ ì§œ ì„ íƒì‹œ ê°’ ë„˜ì–´ê°€ë„ë¡ ì„¤ì •
ì´ë¡œì¸í•´ ë‚ ì§œ í´ë¦­ì‹œ í¸ë¦¬í•œ ë°•ìŠ¤ì˜¤í”¼ìŠ¤ ìˆœìœ„ ì¡°íšŒê°€ëŠ¥

## 4. ì¹´ì¹´ì˜¤ë§µ api

- í‚¤ì›Œë“œë¡œ ì¥ì†Œê²€ìƒ‰í•˜ê³  ëª©ë¡ìœ¼ë¡œ í‘œì¶œí•˜ê¸° (í‚¤ì›Œë“œì— ì˜í™” ë„£ê³  í˜„ìœ„ì¹˜ì—ì„œ ì§€ë„ê°€ ìƒì„±ë˜ê²Œ í•˜ì˜€ë‹¤)


```js
let lat;
	let lon;
	if (navigator.geolocation) {
		navigator.geolocation.getCurrentPosition(function(position) {
			lat = position.coords.latitude;
			lon = position.coords.longitude;
		}
    
var markers = [];

		var mapContainer = document.getElementById('map'), 
		
		mapOption = {
			center : new kakao.maps.LatLng(lat, lon), // ì§€ë„ì˜ ì¤‘ì‹¬ì¢Œí‘œ
			level : 1
		};
```
(ì¶”ê°€ì„¤ëª…ì€ í•˜ë‹¨ì˜ info.txt ì°¸ê³ )<br>


* * *


## DB êµ¬ì¡°

### *semi_account*

COLUM_NAME|DATA_TYPE|NULLABLE|PKEY|
---|---|---|---|
A_ID|VARCHAR2(30 BYTE)|NO|Y|
A_PASSWORD|VARCHAR2(20 BYTE)|NO|N|
A_NAME|VARCHAR2(100 BYTE)|NO|N|
A_BIRTH|DATE|YES|N|
A_GENDER|VARCHAR2(10 BYTE)|NO|N|
A_EMAIL|VARCHAR2(30 BYTE)|NO|N|
A_PHONE|VARCHAR2(20 BYTE)|NO|N|
A_INTEREST|VARCHAR2(200 BYTE)|NO|N|

### *semi_review*

COLUM_NAME|DATA_TYPE|NULLABLE|PKEY|
---|---|---|---|
R_NO|NUMBER(3,0)|NO|Y|
R_ID|VARCHAR2(30 BYTE)|NO|N|
R_MOVIE|VARCHAR2(50 CHAR)|NO|N|
R_TITLE|VARCHAR2(200 CHAR)|NO|N|
R_DETAIL|VARCHAR2(1000 CHAR)|NO|N|
R_IMG|VARCHAR2(500 CHAR)|YES|N|
R_DATE|DATE|NO|N|
R_COUNT|NUMBER(5,0)|YES|N|
R_IP|VARCHAR2(25 BYTE)|YES|N|

### *semi_free*

COLUM_NAME|DATA_TYPE|NULLABLE|PKEY|
---|---|---|---|
F_NO|NUMBER(8,0)|NO|Y|
F_ID|VARCHAR2(30 BYTE)|NO|N|
F_TITLE|VARCHAR2(200 CHAR)|NO|N|
F_DETAIL|VARCHAR2(1000 CHAR)|NO|N|
F_IMG|VARCHAR2(500 CHAR)|YES|N|
F_DATE|DATE|NO|N|
F_COUNT|NUMBER(5,0)|YES|N|
F_IP|VARCHAR2(25 BYTE)|YES|N|

- DATEì˜ ì €ì¥ë°©ì‹ê³¼ ë¶ˆëŸ¬ì˜¤ê¸°ì— ì£¼ì˜ìš”í•¨
- ê²Œì‹œíŒ IDì¹¼ëŸ¼ì€ ACCOUNT í…Œì´ë¸”ê³¼ ê´€ê³„í˜•ì„ ìœ„í•œ ë§¤ê°œ
- ê²Œì‹œíŒ IPì¹¼ëŸ¼ì€ ì¤‘ë³µì¡°íšŒë¥¼ ì²´í¬í•˜ê¸° ìœ„í•¨

* * *

## TEAM 

íŒ€ì›|ì´ë©”ì¼|Task|
---|---|---|
ê¹€íƒœí˜•|`trainst37@gmail.com`|íŒ€ê´€ë¦¬â€¢ë¬¸ì„œâ€¢PageTransâ€¢ê²Œì‹œíŒâ€¢ë‚´ê°€ì“´ê¸€â€¢ê¸€DBâ€¢cssì •ë¦¬|
ì´ë™ìš°|`leedongwoo564@gmail.com`|ì£¼ë³€ì˜í™”ê´€ ì°¾ê¸°â€¢ë°•ìŠ¤ì˜¤í”¼ìŠ¤ ì •ë³´â€¢í˜ì´ì§•â€¢ì˜í™”ë‰´ìŠ¤ ì •ë³´â€¢ì˜í™”ê²€ìƒ‰â€¢ì „ì²´ cssâ€¢readme|
ê¹€ìˆ˜í˜„|`kimsouhyne@gmail.com`|ì£¼ë³€ì˜í™”ê´€ ì°¾ê¸°â€¢ë°•ìŠ¤ì˜¤í”¼ìŠ¤ ì •ë³´â€¢í˜ì´ì§•â€¢ì˜í™”ë‰´ìŠ¤ ì •ë³´â€¢ì˜í™”ê²€ìƒ‰â€¢ì „ì²´ cssâ€¢git|
ì†¡ì¤€ìš°|`thdwnsdn98@gmail.com`|ë¡œê·¸ì¸â€¢íšŒì›ê°€ì…â€¢ë§ˆì´í˜ì´ì§€â€¢íšŒì›ê´€ë¦¬DBâ€¢css(ê²Œì‹œíŒí¬í•¨)â€¢ppt|

### *ì°¸ì¡°íŒŒì¼*
* info(Real-semi).txt : [Click](https://github.com/barkong/Real-semi/files/10151036/infoReal-semi.2.txt)<br>
* PPT(Real-semi) [Click](https://github.com/barkong/Real-semi/files/10151129/Real-semi.pptx)

